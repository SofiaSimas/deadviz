{"version":3,"file":"index.834c56f7.81d8a122bd8850d3fac8.hot-update.js","sources":["/Users/alfian/Documents/Project/OSS/extension/deadviz/src/popup/menu.js"],"sourcesContent":["/*global chrome*/\nimport React, {useEffect, useState} from 'react';\nimport styled from 'styled-components';\nimport { Tabs } from 'antd';\nimport DeadlineList from \"./deadlineList\";\nimport Submission from \"./submission\";\n\nconst { TabPane } = Tabs;\n\nconst StyledTabs = styled(Tabs)`\n    width: 300px;\n`;\n\nconst newTabURL = \"chrome://newtab/\";\n\nconst Menu = () => {\n    const [deadlines, setDeadlines] = useState([]);\n\n    useEffect(() => {\n        chrome.storage.sync.get('deadlines', data => {\n            if (Array.isArray(data.deadline)) {\n                setDeadlines(data.deadlines);\n            }\n        });\n    })\n\n    const handleDelete = (id, index) => {\n        const newDeadlines = [...deadlines.slice(0, index), ...deadlines.slice(index+1)];\n        chrome.storage.sync.set({ deadlines: newDeadlines }, () => {\n            console.log(`Deadline with ID ${id} has been deleted`);\n            setDeadlines(newDeadlines);\n            chrome.tabs.getCurrent(tab => {\n                if (tab.url === newTabURL) {\n                    chrome.tabs.reload();\n                }\n            })\n        });\n    }\n\n    const handleAdd = ({name, start, end}) => {\n        const deadline = {\n            id: Date.now(),\n            name,\n            start: start.toJSON(),\n            end: end.toJSON()\n        };\n\n        const newDeadlines = [...deadlines, deadline];\n\n        chrome.storage.sync.set({ deadlines: newDeadlines }, function() {\n            console.log('new goal/plan has been added');\n            setDeadlines(newDeadlines);\n            chrome.tabs.reload();\n        });\n    }\n\n    return (\n        <StyledTabs defaultActiveKey=\"1\" centered animated>\n            <TabPane tab=\"New\" key=\"1\">\n                <Submission onSubmit={handleAdd}/>\n            </TabPane>\n            <TabPane tab=\"List\" key=\"2\">\n                <DeadlineList data={deadlines} onDelete={handleDelete}/>\n            </TabPane>\n        </StyledTabs>\n    );\n}\n\nexport default Menu;"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAEA;;AAAA;AAIA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAOA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;;;;A","sourceRoot":""}